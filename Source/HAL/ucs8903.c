#include "ucs8903.h"
#include "sys.h"
#include "core_cm3.h"


unsigned int ucs8903_data[24];
void ucs8903_init(void)
{
	DIN_L;
}

void ucs8903_send_16bits(unsigned int data)
{
	int i;
	for(i=0;i<16;i++)
	{
		DIN_H;
		if(data&0x8000)
		{
			__NOP();
			__NOP();
			__NOP();	
			__NOP();
			__NOP();
			__NOP();	
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			DIN_L;
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
		}
		else
		{
			__NOP();
			__NOP();
			__NOP();	
			__NOP();
			__NOP();
			__NOP();	
			__NOP();
			__NOP();
			__NOP();	
			__NOP();
			__NOP();
			__NOP();	
			__NOP();	
			__NOP();
			__NOP();
			__NOP();	
			__NOP();	
			__NOP();	
			__NOP();	
			DIN_L;
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();	
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();	
			__NOP();	
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();
			__NOP();	
			__NOP();
			__NOP();
		}
		data <<= 1;
	}
}

void ucs8903_update_chanle(unsigned int *buf)
{
	int i,j;
	INTX_DISABLE();
	for(i=0;i<UCS8903_NUMS;i++)
	{
		for(j=0;j<3;j++)
		{
			ucs8903_send_16bits(buf[i*3+j]);
		}
	}
	INTX_ENABLE();
}
